"use strict";function ClientPopupController(n,t,i,r,u,f){n.initialize=function(){if(n.form={},n.resultPopUp={isRefresh:!1,client:[]},n.client=u.client,n.applicationTypes=u.applicationTypes,n.isEdit=u.isEdit,u.isEdit){for(var t=0;t<n.applicationTypes.length;t++)if(n.client.applicationType.id==n.applicationTypes[t].id){n.client.applicationType=n.applicationTypes[t];break}n.popupHeaderText="Edit";n.popupOkText="Update"}else n.popupHeaderText="Add",n.popupOkText="Add"};n.ok=function(){n.resultPopUp.isRefresh=!0;u.isEdit?r.restPut(n.client,f.appConfig.ApiURL+i.urls.ApiUrl.putClient,!1).then(function(i){n.resultPopUp.isEdition=!0;n.resultPopUp.client=i;t.close(n.resultPopUp)}):r.restPost(n.client,f.appConfig.ApiURL+i.urls.ApiUrl.postClient,!1).then(function(i){n.resultPopUp.isEdition=!1;n.resultPopUp.client=i;t.close(n.resultPopUp)})};n.cancel=function(){t.dismiss("cancel")}}function RefreshTokenController(n,t,i,r,u,f){var o=function(){n.gridRefreshTokensOptions={columnList:[{name:"refreshTokenId",header:"Refresh Token Id",isFilter:!1,isOrder:!1},{name:"userName",header:"User",isFilter:!1,isOrder:!1},{name:"clientId",header:"Client",isFilter:!1,isOrder:!1},{name:"issuedUtc",header:"Issued At (UTC)",isFilter:!1,isOrder:!1},{name:"expiresUtc",header:"Expires At (UTC)",isFilter:!1,isOrder:!1}],noDataMessage:"There are no refresh tokens",animate:!0,crudOptions:{enable:!0,"delete":{security:{route:"/refreshToken",action:"delete"},method:function(t){n.deleteRefreshToken(t)}}},infiniteScroll:{isActive:!0,distance:0,perPage:12,initialLoad:30}}},e=function(){u.restGet(f.appConfig.ApiURL+r.urls.ApiUrl.getRefreshTokens,!1).then(function(t){n.gridRefreshTokensOptions.dataList=t})};n.initialize=function(){o();e()};n.getRefreshTokens=function(){e()};n.deleteRefreshToken=function(i){var e=[{name:"Refresh Token Id",value:i.refreshTokenId},{name:"User Name",value:i.userName},{name:"Client Id",value:i.clientId},{name:"Issued At (UTC)",value:i.issuedUtc},{name:"Expires At (UTC)",value:i.expiresUtc}],o={headerText:"Please Confirm",message:"Are you sure you want to delete this refreshToken?",buttons:{ok:"Yes",cancel:"No"},modalType:"confirm",details:e},s=t.modal(o);s.then(function(){var t=window.encodeURIComponent(i.refreshTokenId);u.restDelete(f.appConfig.ApiURL+r.urls.ApiUrl.deleteRefreshToken.replace("{refreshTokenId}",t),!1).then(function(){var t=n.gridRefreshTokensOptions.dataList.indexOf(i);t!=-1&&n.gridRefreshTokensOptions.dataList.splice(t,1)})},function(){})}}function RoleController(n,t,i,r,u,f,e){var o=function(){n.gridRolesOptions={columnList:[{name:"name",header:"Role",isFilter:!1,isOrder:!0,width:"85%"}],noDataMessage:"There are no roles",animate:!0,crudOptions:{enable:!0,insert:{security:{route:"/role",action:"insert"},method:function(){n.openPopup(!1,null)}},edit:{security:{route:"/role",action:"edit"},method:function(t){n.openPopup(!0,t)}},"delete":{security:{route:"/role",action:"delete"},method:function(t){n.deleteRole(t)}}}}},s=function(){f.restGet(e.appConfig.ApiURL+u.urls.ApiUrl.getRoles,!1).then(function(t){n.gridRolesOptions.dataList=t})};n.initialize=function(){o();s()};n.openPopup=function(t,r){var u=angular.copy(r),f=i.open({windowClass:"modalWindow",templateUrl:"./app/views/RolePopup.html",controller:"RolePopupController",resolve:{items:function(){return{isEdit:t,role:u}}}});f.result.then(function(t){if(t.isRefresh)if(t.isEdition){for(var i=0;i<n.gridRolesOptions.dataList.length;i++)if(n.gridRolesOptions.dataList[i].id==t.role.id){n.gridRolesOptions.dataList[i]=t.role;break}}else n.gridRolesOptions.dataList.push(t.role)},function(){})};n.deleteRole=function(i){var r=[{name:"Name",value:i.name}],o={headerText:"Please Confirm",message:"Are you sure you want to delete this role?",buttons:{ok:"Yes",cancel:"No"},modalType:"confirm",details:r},s=t.modal(o);s.then(function(){f.restDelete(e.appConfig.ApiURL+u.urls.ApiUrl.deleteRole.replace("{roleId}",i.id),!1).then(function(){var t=n.gridRolesOptions.dataList.indexOf(i);t!=-1&&n.gridRolesOptions.dataList.splice(t,1)})},function(){})}}function RolePopupController(n,t,i,r,u,f){n.initialize=function(){n.form={};n.resultPopUp={isRefresh:!1,role:[]};n.role=u.role;n.isEdit=u.isEdit;u.isEdit?(n.popupHeaderText="Edit",n.popupOkText="Update"):(n.popupHeaderText="Add",n.popupOkText="Add")};n.ok=function(){n.resultPopUp.isRefresh=!0;u.isEdit?r.restPut(n.role,f.appConfig.ApiURL+i.urls.ApiUrl.putRole,!1).then(function(i){n.resultPopUp.isEdition=!0;n.resultPopUp.role=i;t.close(n.resultPopUp)}):r.restPost(n.role,f.appConfig.ApiURL+i.urls.ApiUrl.postRole,!1).then(function(i){n.resultPopUp.isEdition=!1;n.resultPopUp.role=i;t.close(n.resultPopUp)})};n.cancel=function(){t.dismiss("cancel")}}function UserController(n,t,i,r,u,f,e){var o=function(){n.gridUsersOptions={columnList:[{name:"userName",header:"User Name",isFilter:!1,isOrder:!0},{name:"email",header:"Email",isFilter:!1,isOrder:!0},{name:"client.clientId",header:"Client Id",isFilter:!1,isOrder:!0},{name:"role.name",header:"Role Name",isFilter:!1,isOrder:!0},{name:"isActive",header:"Is Active",isFilter:!0,isOrder:!0}],noDataMessage:"There are no users",animate:!0,crudOptions:{enable:!0,insert:{security:{route:"/user",action:"insert"},method:function(){n.openPopup(!1,null)}},edit:{security:{route:"/user",action:"edit"},method:function(t){n.openPopup(!0,t)}},"delete":{security:{route:"/user",action:"delete"},method:function(t){n.deleteUser(t)}}}}},s=function(){f.restGet(e.appConfig.ApiURL+u.urls.ApiUrl.usersSetup,!1).then(function(t){n.gridUsersOptions.dataList=t.users;n.roles=t.roles;n.clients=t.clients})};n.initialize=function(){o();s()};n.openPopup=function(t,r){var u=angular.copy(r),f=i.open({windowClass:"modalWindow",templateUrl:"./app/views/UserPopup.html",controller:"UserPopupController",resolve:{items:function(){return{isEdit:t,user:u,roles:n.roles,clients:n.clients}}}});f.result.then(function(t){if(t.isRefresh)if(t.isEdition){for(var i=0;i<n.gridUsersOptions.dataList.length;i++)if(n.gridUsersOptions.dataList[i].userId==t.user.userId){n.gridUsersOptions.dataList[i]=t.user;break}}else n.gridUsersOptions.dataList.push(t.user)},function(){})};n.deleteUser=function(i){var r=[{name:"User Name",value:i.userName}],o={headerText:"Please Confirm",message:"Are you sure you want to delete this user?",buttons:{ok:"Yes",cancel:"No"},modalType:"confirm",details:r},s=t.modal(o);s.then(function(){f.restDelete(e.appConfig.ApiURL+u.urls.ApiUrl.deleteUser.replace("{userId}",i.userId),!1).then(function(){var t=n.gridUsersOptions.dataList.indexOf(i);t!=-1&&n.gridUsersOptions.dataList.splice(t,1)})},function(){})}}function UserPopupController(n,t,i,r,u,f){n.initialize=function(){var t;if(n.form={},n.resultPopUp={isRefresh:!1,client:[]},n.user=u.user,n.roles=u.roles,n.clients=u.clients,n.isEdit=u.isEdit,u.isEdit){for(t=0;t<n.roles.length;t++)if(n.user.role.id==n.roles[t].id){n.user.role=n.roles[t];break}for(t=0;t<n.clients.length;t++)if(n.user.client.clientId==n.clients[t].clientId){n.user.client=n.clients[t];break}n.popupHeaderText="Edit";n.popupOkText="Update"}else n.popupHeaderText="Add",n.popupOkText="Add"};n.ok=function(){n.resultPopUp.isRefresh=!0;u.isEdit?r.restPut(n.user,f.appConfig.ApiURL+i.urls.ApiUrl.putUser,!1).then(function(i){n.resultPopUp.isEdition=!0;n.resultPopUp.user=i;t.close(n.resultPopUp)}):r.restPost(n.user,f.appConfig.ApiURL+i.urls.ApiUrl.postUser,!1).then(function(i){n.resultPopUp.isEdition=!1;n.resultPopUp.user=i;t.close(n.resultPopUp)})};n.cancel=function(){t.dismiss("cancel")}}function match(){return{require:"ngModel",restrict:"A",scope:{match:"="},link:function(n,t,i,r){n.$watch(function(){var t=r.$modelValue||r.$$invalidModelValue;return r.$pristine&&angular.isUndefined(t)||n.match===t},function(n){r.$setValidity("match",n)})}}}(function(){angular.module("app",["ngRoute","ngLocale","jumuro.crudRest","jumuro.oAuth","jumuro.spinner","jumuro.modal","jumuro.grid","jumuro.validations","jumuro.webapi"])})(),function(){function n(n,t){t.interceptors.push("httpInterceptorService")}angular.module("app").config(n);n.$inject=["$locationProvider","$httpProvider"]}(),function(){function n(n){n.when("/login",{templateUrl:"./app/views/login.html",controller:"LoginController"}).when("/role",{templateUrl:"./app/views/role.html",controller:"RoleController"}).when("/client",{templateUrl:"./app/views/client.html",controller:"ClientController",controllerAs:"vm"}).when("/refreshToken",{templateUrl:"./app/views/refreshtoken.html",controller:"RefreshTokenController"}).when("/user",{templateUrl:"./app/views/user.html",controller:"UserController"}).otherwise({redirectTo:"/login"})}angular.module("app").config(n);n.$inject=["$routeProvider"]}(),function(){function n(){$rootScope.title="";$rootScope.$on("$routeChangeError",function(n,t,i,r){r.status===404&&$location.path("/home")})}angular.module("app").run(n);n.$inject=["$rootScope"]}(),function(){function n(){}angular.module("app").controller("AppController",n);n.$inject=["$scope","webapiConstants"]}(),function(){function n(n,t,i,r){function o(){s();h()}function f(n,i){var r=angular.copy(i),f=t.open({windowClass:"modalWindow",templateUrl:"./app/views/ClientPopup.html",controller:"ClientPopupController",resolve:{items:function(){return{isEdit:n,client:r,applicationTypes:u.applicationTypes}}}});f.result.then(function(n){if(n.isRefresh)if(n.isEdition){for(var t=0;t<u.gridClientsOptions.dataList.length;t++)if(u.gridClientsOptions.dataList[t].clientId==n.client.clientId){u.gridClientsOptions.dataList[t]=n.client;break}}else u.gridClientsOptions.dataList.push(n.client)},function(){})}function e(t){var i=[{name:"Client Id",value:t.clientId},{name:"Description",value:t.description}],f={headerText:"Please Confirm",message:"Are you sure you want to delete this client?",buttons:{ok:"Yes",cancel:"No"},modalType:"confirm",details:i},e=n.modal(f);e.then(function(){r.deleteClient(t.cliendId).then(function(){var n=u.gridClientsOptions.dataList.indexOf(t);n!=-1&&u.gridClientsOptions.dataList.splice(n,1)})},function(){})}function s(){this.gridClientsOptions={columnList:[{name:"clientId",header:"Client Id",isFilter:!1,isOrder:!0},{name:"description",header:"Description",isFilter:!1,isOrder:!0},{name:"applicationType.description",header:"Application Type",isFilter:!1,isOrder:!0},{name:"accessTokenExpireTime",header:"Access Token Expire Time",isFilter:!1,isOrder:!0},{name:"refreshTokenLifeTime",header:"Refresh Token Life Time",isFilter:!1,isOrder:!0},{name:"allowedOrigin",header:"Allowed Origin",isFilter:!0,isOrder:!0},{name:"isActive",header:"Is Active",isFilter:!0,isOrder:!0}],noDataMessage:"There are no clients",animate:!0,crudOptions:{enable:!0,insert:{security:{route:"/client",action:"insert"},method:function(){f(!1,null)}},edit:{security:{route:"/client",action:"edit"},method:function(n){f(!0,n)}},"delete":{security:{route:"/client",action:"delete"},method:function(n){e(n)}}}}}function h(){r.getClientsForSetup().then(function(n){u.gridClientsOptions.dataList=n.clients;u.applicationTypes=n.applicationTypes})}var u=this;u.applicationTypes=[];u.deleteClient=e;u.gridClientsOptions={};u.openPopup=f;o()}angular.module("app").controller("ClientController",n);n.$inject=["modalService","$modal","toaster","clientFactory"]}();angular.module("app").controller("ClientPopupController",ClientPopupController);ClientPopupController.$inject=["$scope","$modalInstance","webapiConstants","espaCrudRESTService","items","webapiAppConfigConstants"];angular.module("app").controller("RefreshTokenController",RefreshTokenController);RefreshTokenController.$inject=["$scope","modalService","toaster","webapiConstants","espaCrudRESTService","webapiAppConfigConstants"];angular.module("app").controller("RoleController",RoleController);RoleController.$inject=["$scope","modalService","$modal","toaster","webapiConstants","espaCrudRESTService","webapiAppConfigConstants"];angular.module("app").controller("RolePopupController",RolePopupController);RolePopupController.$inject=["$scope","$modalInstance","webapiConstants","espaCrudRESTService","items","webapiAppConfigConstants"];angular.module("app").controller("UserController",UserController);UserController.$inject=["$scope","modalService","$modal","toaster","webapiConstants","espaCrudRESTService","webapiAppConfigConstants"];angular.module("app").controller("UserPopupController",UserPopupController);UserPopupController.$inject=["$scope","$modalInstance","webapiConstants","espaCrudRESTService","items","webapiAppConfigConstants"];angular.module("app").directive("match",match),function(){function n(n,t,i){function r(){function r(n){return n}function u(){}return t.restGet(i.appConfig.ApiURL+n.urls.ApiUrl.clientsSetup,!1).then(r).catch(u)}function u(r){function u(n){return n}function f(){}return t.restDelete(i.appConfig.ApiURL+n.urls.ApiUrl.deleteClient.replace("{clientId}",r),!1).then(u).catch(f)}return{getClientsForSetup:r,deleteClient:u}}angular.module("app").factory("clientFactory",n);n.$inject=["webapiConstants","jumuroCrudRESTService","webapiAppConfigConstants"]}();
//# sourceMappingURL=angularapp.min.js.map
