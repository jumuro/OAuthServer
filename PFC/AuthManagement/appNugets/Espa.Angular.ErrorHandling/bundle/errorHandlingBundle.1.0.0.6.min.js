"use strict";function exceptionHandlerProvider(){var n=this.defaults={sendEmailLocalHost:!1,appName:"",appTechnology:"AngularJS"};this.setDefaults=function(t){t.sendEmailLocalHost&&(n.sendEmailLocalHost=t.sendEmailLocalHost);t.appName&&(n.appName=t.appName);t.appTechnology&&(n.appTechnology=t.appTechnology)};this.$get=["$log","$window","stacktraceService","errorHandlingAppConfigConstants",function(t,i,r,u){function f(f){var o;t.error.apply(t,arguments);try{var s=f.toString(),h=r.print({e:f}),e=i.navigator,c=i.location.href.toLowerCase().indexOf("localhost")>0;if(!c||n.sendEmailLocalHost){if(u.appConfig.errorHanlingApiUrl)throw new Error("The -errorHanlingApiUrl- appConfig key is not present in the config file of the espa.errorHandling module");o=u.appConfig.errorHanlingApiUrl;$.ajax({type:"POST",url:o,xhrFields:{withCredentials:!0},contentType:"application/json",data:angular.toJson({appName:n.appName,appTechnology:n.appTechnology,url:i.location.href,errorMessage:s,stackTrace:h,navigator:{appVersion:e.appVersion,cookieEnabled:e.cookieEnabled,language:e.language,userAgent:e.userAgent,vendor:e.vendor}})})}}catch(l){t.warn("Error logging failed");t.log(l)}}return f}]}angular.module("espa.errorHandling",[]);angular.module("espa.errorHandling").constant("errorHandlingAppConfigConstants",{appConfig:{errorHanlingApiUrl:"http://localhost:60000/api/error/log"}});angular.module("espa.errorHandling").factory("stacktraceService",function(){return{print:printStackTrace}});angular.module("espa.errorHandling").provider("$exceptionHandler",exceptionHandlerProvider);
/*
//# sourceMappingURL=errorHandlingBundle.min.js.map
*/