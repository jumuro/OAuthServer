"use strict";angular.module("espa.grid",["mgcrea.ngStrap.helpers.dimensions","mgcrea.ngStrap.tooltip","mgcrea.ngStrap.popover","ngAnimate","infinite-scroll"]);angular.module("espa.grid").directive("espaGrid",function(){function n(n,t){var r,i;n.selectedFilterColumn={};n.filters={};n.gridOptions=n.gridOptions();n.gridOptions&&(r=n.gridOptions.dataList,n.dataListFiltered=n.gridOptions.dataList,n.gridOptions.noDataMessage||(n.gridOptions.noDataMessage="No Data"),n.isCrud=n.gridOptions.crudOptions&&n.gridOptions.crudOptions.enable,n.isCrudEdit=n.gridOptions.crudOptions&&n.gridOptions.crudOptions.edit?!0:!1,n.isCrudDelete=n.gridOptions.crudOptions&&n.gridOptions.crudOptions.delete?!0:!1,n.isCrudInsert=n.gridOptions.crudOptions&&n.gridOptions.crudOptions.insert?!0:!1,n.infiniteScroll=n.gridOptions.infiniteScroll||{},n.infiniteScroll.isActive=n.infiniteScroll.isActive||!1,n.infiniteScroll.distance=n.infiniteScroll.distance||0,n.infiniteScroll.elementsLimit=n.infiniteScroll.initialLoad);n.showGrid=function(){var t=!1;return n.gridOptions.dataList!=undefined&&(t=n.gridOptions.dataList.length>0),t};n.isColumnFilter=function(t){return t.isFilter&&n.gridOptions.dataList&&n.gridOptions.dataList.length>1};n.openColumnFilter=function(r,u){var f,e;for(n.selectedFilterColumn=r,n.selectedFilterColumnIndex=u,f=0;f<n.gridOptions.columnList.length;f++)n.gridOptions.columnList[f].isFilter&&n.gridOptions.columnList[f].name==r.name&&(e=t("filter")(n.gridOptions.dataList,n.filterByForFilterList),n.gridOptions.columnList[f].filterList=Enumerable.From(e).Distinct(function(n){return n[r.name]}).Select(function(t){return{filterValue:t[r.name],isIncluded:Enumerable.From(n.dataListFiltered).Any(function(n){return n[r.name]==t[r.name]})}}).ToArray());i()};n.applyFilter=function(){n.filters[n.selectedFilterColumn.name]=Enumerable.From(n.gridOptions.columnList[n.selectedFilterColumnIndex].filterList).Where(function(n){return n.isIncluded==!0}).Select(function(n){return{filterValue:n.filterValue,isIncluded:n.isIncluded}}).ToArray();n.gridOptions.columnList[n.selectedFilterColumnIndex].filtered=!0};n.removeFilter=function(){n.filters[n.selectedFilterColumn.name]=null;n.gridOptions.columnList[n.selectedFilterColumnIndex].filtered=!1};n.checkAll=function(){for(var t=0;t<n.gridOptions.columnList[n.selectedFilterColumnIndex].filterList.length;t++)n.gridOptions.columnList[n.selectedFilterColumnIndex].filterList[t].isIncluded=n.filters.isAll};n.canFilter=function(){for(var i=0,t=0;t<n.gridOptions.columnList[n.selectedFilterColumnIndex].filterList.length;t++)n.gridOptions.columnList[n.selectedFilterColumnIndex].filterList[t].isIncluded&&i++;return i>0};n.checkItemFilter=function(){i()};n.filterBy=function(t){for(var r,f=!1,u=0,i=0;i<n.gridOptions.columnList.length;i++)if(n.filters[n.gridOptions.columnList[i].name]){for(r=0;r<n.filters[n.gridOptions.columnList[i].name].length;r++)if(n.filters[n.gridOptions.columnList[i].name][r].isIncluded&&n.filters[n.gridOptions.columnList[i].name][r].filterValue==t[n.gridOptions.columnList[i].name]){u++;break}}else u++;return u==n.gridOptions.columnList.length&&(f=!0),f};n.filterByForFilterList=function(t){for(var r,f=!1,u=0,i=0;i<n.gridOptions.columnList.length;i++)if(n.filters[n.gridOptions.columnList[i].name]&&n.gridOptions.columnList[i].name!=n.selectedFilterColumn.name){for(r=0;r<n.filters[n.gridOptions.columnList[i].name].length;r++)if(n.filters[n.gridOptions.columnList[i].name][r].isIncluded&&n.filters[n.gridOptions.columnList[i].name][r].filterValue==t[n.gridOptions.columnList[i].name]){u++;break}}else u++;return u==n.gridOptions.columnList.length&&(f=!0),f};n.columnIsFiltered=function(t){var i=!1;return n.gridOptions.columnList[t].filtered&&(i=!0),i};n.selectedColumnIsFiltered=function(){var t=!1;return n.gridOptions.columnList[n.selectedFilterColumnIndex].filtered&&(t=!0),t};n.sortBy=function(t){(t.isOrder===undefined||t.isOrder===!0)&&(n.predicate=t.name,n.reverse=!n.reverse,n.selectedOrderColumn=t)};n.isColumnOrdered=function(t){var i=n.selectedOrderColumn?n.selectedOrderColumn.name:"";return t.name==i&&n.gridOptions.dataList&&n.gridOptions.dataList.length>1};n.loadMore=function(){n.dataListFiltered!==undefined&&(n.infiniteScroll.isActive?n.infiniteScroll.elementsLimit+=n.infiniteScroll.perPage:n.infiniteScroll.elementsLimit=n.dataListFiltered.length)};n.getLimit=function(){return!n.infiniteScroll.isActive&&n.showGrid()?n.gridOptions.dataList.length:n.infiniteScroll.elementsLimit};i=function(){for(var i,r=0,t=0;t<n.gridOptions.columnList[n.selectedFilterColumnIndex].filterList.length;t++)n.gridOptions.columnList[n.selectedFilterColumnIndex].filterList[t].isIncluded&&r++;return i=r==n.gridOptions.columnList[n.selectedFilterColumnIndex].filterList.length,n.filters.isAll=i,i}}var t={restrict:"AE",scope:{gridOptions:"&espaGridoptions"},templateUrl:"appNugets/Espa.Angular.Grid/templates/gridTemplate.html?v=2",controller:n};return n.$inject=["$scope","$filter"],t});angular.module("espa.grid").directive("espaOnepopover",function(){return{restrict:"EA",link:function(n,t){var i=$(t);i.click(function(){$(".popover").each(function(){var n=$(this);n.parent().find("button").attr("id")!=i.parent().attr("id")&&n.scope().$hide()})})}}});angular.module("espa.grid").directive("espaHideout",function(){return{restrict:"EA",link:function(){}}});
/*
//# sourceMappingURL=gridBundle.min.js.map
*/